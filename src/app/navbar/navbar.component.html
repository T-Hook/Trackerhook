<div class="header navbar">
    <div class="header-container">
        <ul class="nav-left">
            <li>
                <a id='sidebar-toggle' class="sidebar-toggle" href="javascript:void(0);">
                    <i class="ti-menu"></i>
                </a>
            </li>
            <li class="search-box">
                <a class="search-toggle no-pdd-right" href="javascript:void(0);">
                    <i class="search-icon ti-search pdd-right-10"></i>
                    <i class="search-icon-close ti-close pdd-right-10"></i>
                </a>
            </li>
            <li class="search-input">
                <input class="form-control" type="text" placeholder="Search...">
            </li>
        </ul>
        <ul class="nav-right">
            <li class="notifications dropdown">
                <span class="counter bgc-red"> </span>
                <a href="" class="dropdown-toggle no-after" data-toggle="dropdown">
                    <i class="ti-bell"></i>
                </a>

                <ul class="dropdown-menu">
                    <li class="pX-20 pY-15 bdB">
                        <i class="ti-bell pR-10"></i>
                        <span class="fsz-sm fw-600 c-grey-900">Notifications</span> <i (click)="refreshN()" class="ti-reload float-right"> </i>
                    </li>
                    <li>
                        <ul class="ovY-a pos-r scrollable lis-n p-0 m-0 fsz-sm" *ngFor="let notif of notification ; let r =index">
                            <li>
                                <a href="" class='peers fxw-nw td-n p-20 bdB c-grey-800 cH-blue bgcH-grey-100'>
                                    <div class="peer mR-15">
          </div>
                                    <div class="peer peer-greed">
                            <span>
                              <span class="fw-500"> Administrator </span>
                              <span class="c-grey-600"> {{notif.data}} <span class="text-dark">{{notif.description}}</span>
                              </span>
                            </span>

                            <div>
                                        <p class="m-0">
                                            <small class="fsz-xs " style="text-align: right;">{{notif.date | date: 'dd/MM/yyyy HH:mm'}}</small>
                                        </p>

                                      </div>
                                    </div>
                                </a>
                            </li>


                        </ul>
                    </li>
                    <li class="pX-20 pY-15 ta-c bdT">
                    <span>
                      <a href="" class="c-grey-600 cH-blue fsz-sm td-n">View All Notifications <i class="ti-angle-right fsz-xs mL-10"></i></a>
                    </span>
                    </li>
                </ul>
            </li>


            <li class="notifications dropdown">
                <span class="counter bgc-blue"> </span>
                <a href="" class="dropdown-toggle no-after" data-toggle="dropdown">
                    <i class="ti-email"></i>
                </a>

                <ul class="dropdown-menu">
                    <li class="pX-20 pY-15 bdB">
                        <i class="ti-email pR-10"></i>
                        <span class="fsz-sm fw-600 c-grey-900">Emails</span>   <i (click)="refresh()" class="ti-reload float-right"> </i>
                    </li>
                    <li class="pX-20 pY-5 bdB center">

                      <span class="fsz-sm fw-600 c-grey-900"> <a (click)="open(content)" >new message</a></span>
                  </li>
                    <li>
                        <ul class="ovY-a pos-r scrollable lis-n p-0 m-0 fsz-sm" *ngFor="let mail of mail | filterUnique ; let r =index">
                            <li   *ngIf="mail?.idS" routerLink="/mail/{{mail.idS._id}}">
                                <a (click)="details(mail.idS)" class='peers fxw-nw td-n p-20 bdB c-grey-800 cH-blue bgcH-grey-100'>
                                    <div class="peer mR-15">
                                        <img class="w-3r bdrs-50p"  src="https://t4.ftcdn.net/jpg/00/64/67/63/360_F_64676383_LdbmhiNM6Ypzb3FM4PPuFP9rHe7ri8Ju.jpg" alt="">
                                    </div>
                                    <div class="peer peer-greed">
                                        <div>
                                            <div class="peers jc-sb fxw-nw mB-5">
                                                <div class="peer">
                                                    <p class="fw-500 mB-0" *ngIf="mail?.idS" >{{mail.idS.lname}} {{mail?.idS.fname}}</p>
                                                </div>
                                                <div class="peer">
                                                    <small class="fsz-xs">{{ mail.date | date: 'dd/MM/yyyy HH:mm'}}</small>
                                                </div>
                                            </div>
                                            <span class="c-grey-600 fsz-sm">
                               {{mail.message}}
                              </span>
                                        </div>
                                    </div>
                                </a>
                            </li>

                        </ul>
                    </li>
                    <li class="pX-20 pY-15 ta-c bdT">
                    <span>
                      <a [routerLink]="['/mails']" routerLinkActive="router-link-active"  class="c-grey-600 cH-blue fsz-sm td-n">View All Email <i class="fs-xs ti-angle-right mL-10"></i></a>
                    </span>
                    </li>
                </ul>
            </li>
            <li class="dropdown">
                <a href="" class="dropdown-toggle no-after peers fxw-nw ai-c lh-1" data-toggle="dropdown">
                    <div class="peer mR-10">
                        <img class="w-2r bdrs-50p" src="https://t4.ftcdn.net/jpg/00/64/67/63/360_F_64676383_LdbmhiNM6Ypzb3FM4PPuFP9rHe7ri8Ju.jpg" alt="">
                    </div>
                    <div class="peer">
                        <span class="fsz-sm c-grey-900" *ngIf="globalService.currentUserValue">{{globalService.currentUserValue.email}}</span>
                    </div>
                </a>
                <ul class="dropdown-menu fsz-sm">

                    <li>
                        <a [routerLink]="['/profile']" routerLinkActive="router-link-active"  class="d-b td-n pY-5 bgcH-grey-100 c-grey-700">
                            <i class="ti-user mR-10"></i>
                            <span>Profile</span>
                        </a>
                    </li>

                    <li role="separator" class="divider"></li>
                    <li>
                        <a (click)="globalService.logout()" class="d-b td-n pY-5 bgcH-grey-100 c-grey-700">
                            <i class="ti-power-off mR-10"></i>
                            <span>Logout</span>
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <ng-template #content let-modal>
      <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title"> New email </h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
<form  class="form-horizontal" name="send" (ngSubmit)="sendmail()" novalidate>
  <div class="form-group">
    <select class="form-control" [(ngModel)]="send.idR" name="idR" class="form-control">
    <option class="dropdown-item" disabled selected value="undefined">To</option>
     <option *ngFor="let user of users" value="{{user._id}}" >
       {{user.email}}
     </option>
    </select>
   </div>
   <div class="form-group">
    <textarea type="text" class="form-control" id="message" placeholder="Your email ..." rows="6" cols="6" required [(ngModel)]="send.message" name="message"></textarea>
  </div>


          <div class="modal-footer">
          <button  href="/mail/idR" type="submit" class="btn btn-outline-secondary">send</button>

             </div>


            </form>

    </div>
      </ng-template>
</div>

